# Jinja-—à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
–í Superset –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Jinja-—à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ SQL-–∑–∞–ø—Ä–æ—Å, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ "—Å–Ω–∞—Ä—É–∂–∏" –∏ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞.   

–î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∞–∫—Ä–æ—Å `filter_values()` .

### ‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ SQL-–∑–∞–ø—Ä–æ—Å–µ

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –≤–∞—à–µ–π –∑–∞–¥–∞—á–∏:

1.  **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–∫—Ä–æ—Å–∞ `filter_values()`**: –≠—Ç–æ—Ç –º–∞–∫—Ä–æ—Å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π, –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ñ–∏–ª—å—Ç—Ä—É –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ. –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –≤ SQL-—É—Å–ª–æ–≤–∏–∏ `IN`, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä `| where_in`, –∫–æ—Ç–æ—Ä—ã–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –º–∞—Å—Å–∏–≤ –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å SQL .

    ```sql
    SELECT *
    FROM your_mart_table
    WHERE 
      {% if filter_values('your_filter_column') %}
        -- –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω, –¥–æ–±–∞–≤–ª—è–µ–º —É—Å–ª–æ–≤–∏–µ
        your_filter_column IN {{ filter_values('your_filter_column') | where_in }}
      {% else %}
        -- –ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω, –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –Ω–∏—á–µ–≥–æ
        1 = 1
      {% endif %}
    ```

2.  **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**:
    *   **–í–∫–ª—é—á–∏—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É —à–∞–±–ª–æ–Ω–æ–≤**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `superset_config.py` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ñ–ª–∞–≥ `ENABLE_TEMPLATE_PROCESSING = True` .
    *   **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–±–ª–∞—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏—è —Ñ–∏–ª—å—Ç—Ä–∞ (Scoping)**: –ù–∞ –¥–∞—à–±–æ—Ä–¥–µ –≤–æ –≤–∫–ª–∞–¥–∫–µ "Edit Filters" -> "Scoping" –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ–±—ã –≤–∞—à —Ñ–∏–ª—å—Ç—Ä –ø—Ä–∏–º–µ–Ω—è–ª—Å—è –∫ —Ü–µ–ª–µ–≤–æ–º—É —á–∞—Ä—Ç—É . –ë–µ–∑ —ç—Ç–æ–≥–æ —à–∞–≥–∞ –º–∞–∫—Ä–æ—Å `filter_values()` –Ω–µ –ø–æ–ª—É—á–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è .
    *   **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç**: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ SQL-–∑–∞–ø—Ä–æ—Å —Å Jinja –≤ SQL Lab –∫–∞–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (Virtual Dataset) –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —á–∞—Ä—Ç–∞ .

### üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

–ß—Ç–æ–±—ã —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —á–∞—Ä—Ç–æ–≤ –∏ –∏–∑–±–µ–∂–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞ –ø–æ–¥ –∫–∞–∂–¥—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, –º–æ–∂–Ω–æ –ø–æ–π—Ç–∏ –¥–∞–ª—å—à–µ:

*   **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å**: –û–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å —Å Jinja –º–æ–∂–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏. –í—ã –º–æ–∂–µ—Ç–µ –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ–∫, –∏—Å–ø–æ–ª—å–∑—É—è `{% if %}` .
*   **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `url_param` –¥–ª—è –≥–ª—É–±–æ–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**: –î–ª—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞–∫—Ä–æ—Å `{{ url_param('parameter_name') }}` . –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä—è–º–æ –≤ URL –¥–∞—à–±–æ—Ä–¥–∞, —á—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ –≥–æ—Ç–æ–≤—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ Jinja-—à–∞–±–ª–æ–Ω—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ —Ç–æ–ª—å–∫–æ –¥–æ–≤–µ—Ä–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º . –¢–∞–∫–∂–µ —É—á—Ç–∏—Ç–µ, —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º—ã–µ —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω—ã, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–ª–∏—è—é—Ç –Ω–∞ –∫–ª—é—á –∫–µ—à–∞, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å, –¥–æ–±–∞–≤–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `add_to_cache_keys=False` .

### üíé –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Jinja-—à–∞–±–ª–æ–Ω–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∏–∑–±–µ–≥–∞—è –ø–æ–ª–Ω–æ–≥–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏—Ç—Ä–∏–Ω—ã –∏ —ç–∫–æ–Ω–æ–º—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã.
