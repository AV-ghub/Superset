# Выполнить запрос в SQL Lab без использования кэширования

## 1. **Использование параметра в URL**
   Добавьте параметр `force=true` к URL вашего запроса в SQL Lab. Это заставит Superset игнорировать кэш и выполнить запрос заново. Например:
   ```
   http://ваш-суперсет.ру/superset/sqllab?force=true
   ```
   Это простой способ обойти кэш без изменения настроек .

## 2. **Настройка времени жизни кэша (TTL)**
   Вы можете временно изменить настройки кэша для вашего запроса:
   - В разделе **Settings** вашего датасета или базы данных установите **Cache Timeout** в значение `0` или `-1`. Это отключит кэширование для конкретного датасета или базы данных.
   - Например, в конфигурации базы данных можно задать:
     ```python
     DATA_CACHE_CONFIG = {
         "CACHE_TYPE": "SupersetMetastoreCache",
         "CACHE_DEFAULT_TIMEOUT": -1  # Отключает кэширование
     }
     ```
   Это заставит запросы всегда выполняться в обход кэша .

## 3. **Использование Jinja-шаблонов для динамических запросов**
   Если вы используете Jinja-шаблоны, вы можете добавить параметр, который будет игнорировать кэш. Например:
   ```sql
   SELECT * 
   FROM your_table 
   WHERE {{ current_username(add_to_cache_keys=False) }}
   ```
   Это не отключит кэширование полностью, но изменит ключ кэша, что effectively приведёт к выполнению нового запроса .

### 4. **Отключение кэширования на уровне конфигурации**
   Если вы администратор Superset, вы можете полностью отключить кэширование для всех запросов, изменив конфигурацию в `superset_config.py`:
   ```python
   CACHE_CONFIG = {
       "CACHE_TYPE": "null"  # Полностью отключает кэширование
   }
   ```
   Это радикальный способ, который влияет на всю систему, поэтому используйте его только для тестирования .

## 5. **Очистка кэша вручную**
   Вы можете очистить кэш Redis или другого бэкенда, используемого Superset, чтобы все последующие запросы выполнялись заново. Например, для Redis:
   ```bash
   redis-cli FLUSHALL
   ```
   Это не отключает кэширование, но гарантирует, что каждый запрос будет выполняться без использования предыдущих результатов .

## 6. **Использование параметра в UI**
   В некоторых версиях Superset есть опция **Force Refresh** или **Skip Cache** в интерфейсе SQL Lab. Если такая опция доступна, используйте её для выполнения запроса без кэширования.

## Важные замечания:
- **Производительность**: Отключение кэширования может увеличить нагрузку на вашу базу данных, особенно при частых запросах.
- **Временные настройки**: Если вы изменяете настройки кэширования, не забудьте вернуть их после тестирования, чтобы не нарушить работу системы в production.
- **Права доступа**: Некоторые настройки требуют административных прав. Если вы не администратор, обратитесь к вашему администратору Superset.

Если вам нужно просто протестировать время отклика, наиболее безопасным и простым способом является использование параметра `force=true` в URL или временное изменение времени жизни кэша.
